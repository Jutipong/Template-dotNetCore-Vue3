function _DDMMYYYY(n){return n?dayjs(n).format("DD/MM/YYYY"):"-"}function _DDMMYYYYHHmmss(n){return n?dayjs(n).format("DD/MM/YYYY HH:mm:ss"):"-"}function _HHmmss(n){return n?dayjs(n).format("HH:mm:ss"):"-"}const _Enum={GuidEmpty:"00000000-0000-0000-0000-000000000000",Message:{SaveSuccess:"บันทักข้อมูลสำเร็จ",SaveFail:"บันทึกข้อมูลไม่เสำเร็จ",DeleteSuccess:"ลบข้อมูลสำร็จ",DeleteFail:"ลบข้อมูลไม่สำร็จ",AjaxFail:"เกิดข้อผิดพลาดกรุณาลองใหม่อีกครั้ง"},Action:{VIEW:{Value:0,Text:"View"},Create:{Value:1,Text:"Create"},Update:{Value:2,Text:"Update"},Delete:{Value:3,Text:"Delete"}},Role:{ADMIN:"ADMIN",MAKER:"MAKER",APPROVER:"APPROVER",VIEWER:"VIEWER",MAKERFO:"MAKERFO"}},_Config={DataTable:{PageLength:25,ASC:"asc",DESC:"desc"},IntervalTime:{_1M:6e4,_3M:18e4,_5M:3e5},AjaxType:{Post:"POST",Get:"GET",Put:"PUT",Delete:"DELETE"},Confirm:{Red:"red",Blue:"blue",Orange:"orange",Purple:"purple",Green:"green"},DatePicker:{language:{Eng:"en-en",Th:"th-th"}}};const _genID=n=>{for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<n;r++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},_isNull=n=>typeof n=="undefined"||n===undefined||n===""||n===""||n===null||_.isEmpty(n)?!0:!1,_uuID=()=>{let n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&3|8).toString(16)})};var toastr;const _toasterOptions=()=>{toastr.options={closeButton:!0,debug:!1,progressBar:!0,preventDuplicates:!1,positionClass:"toast-top-right",onclick:null,showDuration:"400",hideDuration:"1000",timeOut:"7000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}},_toastrSuccess=n=>{_toasterOptions(),toastr.success(n)},_toastrError=n=>{_toasterOptions(),toastr.error(n)},_toastrWarning=n=>{_toasterOptions(),toastr.warning(n)},_BlockUI=()=>{$(".BlockUI").fadeIn()},_UnBlockUI=()=>{$(".BlockUI").fadeOut()},_alertConfirm=(n,t,i,r,u,f,e)=>{t=_isNull(t)?"fa fa-question":t,i=_isNull(i)?"ใช่":i,r=_isNull(r)?"ดำเนินการต่อ ใช่หรือไม่?":r,u=_isNull(u)?"ใช่":u,f=_isNull(f)?"ยกเลิก":f,$.confirm({type:n,columnClass:"col-md-3 col-md-offset-9",containerFluid:!0,icon:t,title:i,content:r,theme:"modern",closeIcon:!1,animation:"scale",closeAnimation:"scale",animationBounce:1,animationSpeed:500,buttons:{Ok:{text:u,btnClass:"btn-w-m btn-"+n,action:function(){e&&e(!0)}},cancel:{text:f,btnClass:"btn-w-m",action:function(){e&&e(!1)}}}})},_alertPopup=(n,t,i,r,u)=>{n=_isNull(n)?_Config.Confirm.Red:n,t=_isNull(t)?"เกิดข้อผิดพลาด":t,i=_isNull(i)?"":i,r=_isNull(r)?"fa fa-bug":r,$.confirm({type:n,columnClass:"col-md-3 col-md-offset-9",containerFluid:!0,icon:r,title:t,content:i,theme:"modern",closeIcon:!1,animation:"scale",closeAnimation:"scale",animationBounce:1,animationSpeed:500,buttons:{Ok:{text:"ปิด",btnClass:`btn-w-m btn-${n}`,action:function(){u&&u(!0)}}}})},SessionExpired=n=>{n.status==401?_logout():_alertPopup(_Config.Confirm.Red,null,"ajax load fail.",null,()=>{})},_resetForm=n=>{n[0].reset();let t=n.find("input[type=text][readonly]");$.each(t,function(){$(this).prop("readonly",!1)});let i=n.find("select");$.each(i,function(){$(this).parent().find(".select2-selection--single").removeAttr("style");$(this).prop("selectedIndex",0);$(this).trigger("change")});$.each(n.find(".datePicker"),function(){$(this).datepicker("setStartDate",!1);$(this).datepicker("setEndDate",!1)});$.each(n.find(".text-red"),function(){let n=$(this).attr("id");n!=undefined&&$(this).removeClass("text-red")});$.each($(".has-error"),function(n,t){$(t).removeClass("has-error")});$.each($(".help-block"),function(n,t){$(t).removeClass("help-block")})},_resetSelector=n=>{let t=n.find("input");$.each(t,function(){$(this).val(null)});let i=n.find("textarea");$.each(i,function(){$(this).val(null)});let r=n.find("hidden");$.each(r,function(){$(this).val(null)});let u=n.find("select");$.each(u,function(){$(this).prop("selectedIndex",0);$(this).trigger("change")});$.each($(".has-error"),function(n,t){$(t).removeClass("has-error")});$.each($(".help-block"),function(n,t){$(t).removeClass("help-block")})},_submitForm=(n,t)=>{n.on("submit",function(n){n.preventDefault();t&&t()})},_initData=(n,t)=>{if(!_isNull(t)){let i=n.find("input[type=hidden], input[type=text], textarea, select,input[type=number], input[type=checkbox]");$.each(i,function(n,i){var f,i;let r=$(this),u=$(this).attr("name");if(u!==undefined){if(u=u.split(".").pop(),u=="Operation"||u=="operation")return!0;(r.is("input")||r.is("textarea")||r.is("select"))&&(r.is(".datePicker")?(i=t[u],i&&(moment(i,moment.ISO_8601).isValid()?(f=moment(i).format("DD/MM/YYYY"),r.datepicker("setDate",f)):r.val(i))):r.is(":checkbox")?(i=t[u]=="1"||t[u]==!0?!0:!1,r.prop("checked",i)):($(this).val(t[u]),r.is("select")&&$(this).trigger("change")))}})}},_initDatePicker=()=>{$(".datePicker").datepicker({language:"th",autoclose:!0,todayHighlight:!0,format:"dd/mm/yyyy"})},_initDatepickerStartEnd=(n,t)=>{n.change(function(){isNull($(this).val())?t.datepicker("setEndDate",!1):t.datepicker("setStartDate",$(this).val())}),t.change(function(){isNull($(this).val())?n.datepicker("setEndDate",!1):n.datepicker("setEndDate",$(this).val())})},_initSelect2=n=>{var t=n.find("select");$.each(t,function(){$(this).find("option:first").val()==""?$(this).select2({placeholder:"All",allowClear:!0}):$(this).select2()})},intiHighlightText=(n,t,i)=>{$.each(t,function(r){let u=`${r}E`;if(t[u]==1){let u=n.find(`[name='${r}']`);if((u.is("input")||u.is("textarea"))&&u.addClass("text-red"),u.is("select")){let u=n.find('[id*="select2-'+r+'-"]').attr("id");if(t[r]==""||t[r]==null)n.find("#"+u).text()==jqEnum.Message.PleaseSelect&&i?n.find("#"+u).closest(".select2-selection--single").css("background-color","#f6e2e2"):n.find("#"+u).find("span").addClass("text-red");else if(i)n.find("#"+u).closest(".select2-selection--single").css("background-color","#f6e2e2");else{let t=n.find('[id*="select2-'+r+'-"]');t.addClass("text-red")}}}})},focusError=n=>{n.find(".has-error").first().find("input").focus()},_getDatainTable=n=>{let t=[];return $.each(n.find("tr"),function(){let n={};$.each($(this).find("input, select"),function(t,i){n[i.name]=$(this).is(":checkbox")?$(this).prop("checked"):i.value});jQuery.isEmptyObject(n)||t.push(n)}),t},_getDatainTable_tr=n=>{let t={},i=n.closest("tr").find("input, select").serializeArray();return $.each(i,function(n,i){t[i.name]=$(this).is(":checkbox")?$(this).prop("checked"):i.value}),t},_handleEventValidate=n=>{let t=!1;return isNull(n.val())?(n.closest(".custom-validate").addClass("has-error"),t=!1):(n.closest(".custom-validate").removeClass("has-error"),t=!0),n.change(function(){return isNull($(this).val())?($(this).closest(".custom-validate").addClass("has-error"),!1):($(this).closest(".custom-validate").removeClass("has-error"),!0)}),t},_getData_in_Div=n=>{let t={};return $.each($(n).find("input"),function(n,i){t[i.name]=i.value}),t},_generate_html_dataTable=(n,t)=>{let i="";return $.each(t.columns,function(n,t){i+=`<th class='text-center' style="font-weight: bold;">${t.title}</th>`}),`<table class="table table-bordered table-hover" id="${n.replace(".","").replace("#","")}">
        <thead class="bg-primary">
            <tr>
               ${i}
            </tr>
        </thead>
        <tbody></tbody>
    </table>`},_dataTable=(n,t,i,r,u)=>(r.autoRow&&r.columns.unshift({title:"No",data:null,sClass:"text-center",bSortable:!1}),r.btnView&&r.columns.push({title:_Enum.Action.VIEW.Text,data:null,sClass:"text-center",width:"32px",bSortable:!1,render:function(){return'<a class="text-success" data-action='+_Enum.Action.VIEW.Text+' href="javascript:;"><i class="fa fa-edit"><\/i><\/a>'}}),r.btnDelete&&r.columns.push({title:_Enum.Action.Delete.Text,data:null,sClass:"text-center",width:"32px",bSortable:!1,render:function(){return'<a class="text-danger" data-action='+_Enum.Action.Delete.Text+' href="javascript:;"><i class="fa fa-trash"><\/i><\/a>'}}),r.btnAction&&r.columns.push({title:_Enum.Action.VIEW.Text,data:null,sClass:"text-center",width:"32px",bSortable:!1,render:function(){return'<a class="text-pimary" data-action='+_Enum.Action.VIEW.Text+' href="javascript:;"><i class="fa fa-search"><\/i><\/a>'}}),$(n).append(_generate_html_dataTable(t,r)),$("#"+t).dataTable({lengthChange:!0,processing:!1,searching:!1,pageLength:_Config.DataTable.PageLength,serverSide:!0,responsive:!0,language:{emptyTable:"ไม่พบข้อมูล",paginate:{previous:"ก่อนหน้า",next:"ถัดไป"},lengthMenu:"แสดง _MENU_ แถว"},ajax:{"async":!0,url:r.url,type:"POST",data:function(n){return _.isEmpty($("#"+i).serializeArray())?n:$("#"+i).serializeArray().reduce(function(t,i){return n[i.name]=i.value,n},{})},beforeSend:function(){_BlockUI()},complete:function(){_UnBlockUI();u&&u()},error:function(n){SessionExpired(n)}},columns:r.columns,order:r.order,fnRowCallback:function(n,t,i){if(!r.autoRow)return n;var u=this.api().page.info();return $("td:eq(0)",n).html(i+u.start+1).addClass("text-center"),n},fnDrawCallback:function(){$(".pagination").addClass("pull-right");var n=this.api().page.info(),i="";i=n.recordsTotal>0?"หน้า "+parseFloat(n.page+1)+"/"+parseFloat(n.pages)+" แสดงลำดับที่ "+parseFloat(n.start+1)+" ถึง "+parseFloat(n.start+n.length<=n.recordsTotal?n.start+n.length:n.recordsTotal)+" จาก "+parseFloat(n.recordsTotal)+" รายการ":"หน้า 0/0 แสดงลำดับที่ 0 ถึง 0 จาก 0 รายการ";$(`#${t}_info`).text(i);$("#titleMessage").html('<i class="fa fa-list"><\/i> ทั้งหมด '+parseFloat(n.recordsTotal)+" รายการ");$(this).attr("style","width:100%");$(`[name=${t}_length]`).select2({minimumResultsForSearch:-1})}}));
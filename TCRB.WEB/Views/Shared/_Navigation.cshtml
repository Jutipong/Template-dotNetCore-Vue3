@using System.Linq;
@inject TCRB.WEB.Helpers.MenuPermission _MenuPermission

<nav class="navbar-default navbar-static-side" role="navigation">
    <div class="sidebar-collapse">
        <ul class="nav metismenu" id="side-menu">
            <li class="nav-header">
                <div class="dropdown profile-element">
                    <img alt="image" class="rounded" src="~/images/tcrb-logo.png" style="width:160px;">
                </div>
                <div class="logo-element">
                </div>
            </li>
            @{
                var menuss = _MenuPermission.GetMenuPermission();
                foreach (var groupMenu in menuss.MenuGroups)
                {
                    var controllers = groupMenu.Menus.Select(r => r.Controller).ToList();

                    <li class="@Html.IsSelected_li(controller:controllers )">
                        <a><i class="@Html.Raw(groupMenu.Icon)"></i> <span class="nav-label" data-i18n="nav.dashboard">@Html.Raw(groupMenu.Name)</span> <span class="fa arrow"></span></a>

                        @foreach (var menu in groupMenu.Menus)
                        {
                            <ul class="nav nav-second-level collapse @Html.IsSelected_ul(controller:controllers))">
                                <li class="@Html.IsSelected(controller:menu.Controller, action: menu.Action)"><a href="@Url.Action(menu.Action, menu.Controller)"> <i class="@Html.Raw(menu.Icon)"></i>@menu.Name</a></li>
                            </ul>
                        }
                        <ul class="nav nav-second-level collapse @Html.IsSelected_ul(controller:controllers))">
                            <li><a href="@Url.Action("Demo02","Home")"> Todo</a></li>
                        </ul>
                    </li>
                }
            }
        </ul>
    </div>
</nav>